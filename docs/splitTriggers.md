# Split Trigger Criteria for SPECTRA Context System

This document defines the criteria and rationale for triggering the extraction of the SPECTRA Context system from the monolithic `.github` repository into an independent repository.

## üéØ Split Trigger Philosophy

The SPECTRA Context system is designed as a **temporary monolith** with built-in extraction triggers. This approach allows for:

- **Rapid prototyping** and iteration within existing infrastructure
- **Clear boundaries** and governance from day one
- **Automated detection** of readiness for independent operation
- **Minimal friction** during the extraction process

## üìä Split Trigger Criteria

The context system will be extracted to an independent repository when **ANY** of the following criteria are met:

### 1. Contributors Velocity Threshold
**Trigger:** >3 active contributors working on context system per sprint

**Rationale:**
- High contributor velocity indicates the context system has become a primary focus area
- Multiple contributors suggest the need for independent issue tracking and project management
- Reduces merge conflicts and coordination overhead in the main repository

**Measurement:**
- Count unique contributors with commits to `anchors/`, `manifests/`, `server/`, or `governance/` folders
- Measured over rolling 2-week sprints
- Automated tracking via GitHub API and contribution analysis

### 2. Deploy Cadence Divergence
**Trigger:** Context system deployment needs differ from main repository by >2 weeks

**Rationale:**
- Independent deployment schedules indicate different development lifecycles
- Reduces risk of blocking main repository releases for context system changes
- Enables context system to move at its own pace without coordination overhead

**Measurement:**
- Compare context system readiness vs main repository release schedule
- Track deployment frequency and timing requirements
- Monitor for conflicting release windows or quality gates

### 3. Performance Friction Threshold  
**Trigger:** Context runtime resource usage >25% of total repository CI time

**Rationale:**
- High CI time usage indicates the context system has significant operational overhead
- Prevents context system from slowing down other repository workflows
- Enables optimisation of CI/CD pipelines specific to context system needs

**Measurement:**
- Monitor total workflow execution time in GitHub Actions
- Track time spent on context-related validation, testing, and deployment
- Calculate percentage impact on overall repository CI performance

### 4. External Consumer Demand
**Trigger:** First external consumer (non-SPECTRA organisation) requests access

**Rationale:**
- External consumption requires different governance, security, and API stability guarantees
- Independent repository enables proper versioning, release management, and support processes
- Separation of concerns between internal organisational tooling and external API services

**Measurement:**
- Track requests for context system access from external organisations
- Monitor API usage patterns and authentication requirements
- Evaluate security boundaries and access control needs

## üîç Monitoring and Detection

### Automated Tracking
- **Weekly reports** generated by monitoring workflows
- **Dashboard metrics** in repository README Spectral Panel
- **Alert system** when any threshold reaches 80% of trigger point

### Manual Override
- Engineering leadership can trigger extraction at any time
- Emergency extraction process for security or compliance requirements
- Business strategy changes that require independent context system operation

## üöÄ Extraction Process

When split trigger criteria are met:

1. **Automated Assessment**
   - Run detachment score calculation
   - Validate all governance workflows in target repository
   - Confirm schema compatibility and drift status

2. **Repository Creation**
   - Create new `SPECTRADataSolutions/context` repository
   - Copy relevant folders: `anchors/`, `manifests/`, `server/`, `governance/`, `docs/`
   - Migrate contract schemas and validation workflows

3. **Integration Updates**
   - Update `.github` repository to reference external context system
   - Migrate relevant workflows to new repository
   - Update documentation and references

4. **Transition Period**
   - 30-day parallel operation to ensure stability
   - Gradual migration of responsibilities and governance
   - Documentation and training for contributors

## üìã Extraction Checklist

See [extractionChecklist.md](extractionChecklist.md) for detailed mechanical steps and validation procedures.

## üé≠ Delight Considerations

### Innovation Indicators
- **Playful monitoring** with visual progress indicators
- **Gamification** of detachment score improvements
- **Celebration** of extraction readiness milestones

### Agent Legibility
- **Clear documentation** of all criteria and thresholds
- **Plain English** explanations for non-technical stakeholders  
- **Visual dashboards** for real-time status monitoring

## üìö Framework Compliance

This split trigger mechanism enforces **Framework as Law** principles:

- **Governance-first** approach with automated monitoring
- **Clear boundaries** defined before implementation begins
- **Measurement-driven** decisions based on objective criteria
- **Minimal disruption** through planned extraction process

---

**Last Updated:** Generated by spectraContextMonolithBootstrap initiative  
**Review Frequency:** Quarterly assessment of criteria relevance  
**Stakeholder:** SPECTRA engineering leadership and context system contributors